<자연어 처리\_ “KoNLPy” 오픈소스 라이브러리>

Mood Station은 노래 가사를 분석하여 사용자가 원하는 분위기에 맞는 노래를 추천 및 제공하는 시스템이다. 

` `노래 가사에서 분위기를 찾아내기 위해서는 자연어 처리를 활용해야 하는데 한글 자연어 처리를 돕는 도구로서 파이썬 오픈소스 라이브러리의 KoNLPy (코엔엘파이)를 채택했다.

한글의 자연어처리 과정에는 형태소 분석이 가장 핵심적이다.

형태소란 의미를 가지는 가장 작은 단위를 말하는데 KoNLPy에서는 기존에 C, C++, Java등의 언어를 통해 형태소 분석을 할 수 있는 라이브러리들을 파이썬 라이브러리로 통합해서 제공한다.

KoNLPy는 다양한 형태소 분석기들이 객체 형태로 포함되어 있으며 그 중에 성능이 좋은 편으로 알려진 Okt 형태소 분석기를 활용하여 Mood Station의 설계가 진행된다. 

노래가사 자연어 처리 과정으로는 firebase DB에서 자연어 처리를 위한 노래가사를 가져와 Okt에서 제공되는 함수를 통해 텍스트를 형태소 단위로 분류하여 품사 태깅(tagging)을 통해 명사와 형용사, 동사를 구분한다.

다음과 같은 일련의 과정에서 핵심적인 역할을 하는 함수는 okt.pos() 함수이다. okt.pos()는 텍스트를 형태소 단위로 나누어 그에 해당하는 품사와 함께 리스트화 해주는 함수이다.

pos함수의 join옵션은 형태소와 품사를 ‘형태소/품사’ 형태로 묶어서 리스트화 해준다.

예를 들어서 델리스파이스의 고백 가사 중 “하지만 미안해 네 넓은 가슴에 묻혀 다른 누구를 생각했었어” 라는 가사에 대해 print(okt.pos(text, join = true)) 다음과 같이 코드의 join 옵션에 true 값을 주고 text 객체에 노래 가사를 넣었다면 출력 결과로 [‘하지만/Verb’, ‘네/Pronoun’, ‘넓다/Adjective’, ‘가슴/Noun’, ‘에/Josa’, ‘묻히다/Verb’, ‘다른/Detective’, ‘누구/Pronoun’, ‘를/Josa’, ‘생각하다/Verb’] 로 분류될 것이다.

따라서 Pos 함수를 통해 노래 가사의 특정 명사나 형용사, 동사가 들어가는 노래를 태그할 수 있다.

마지막으로 KoNLPy를 통한 자연어 처리의 문제점과 해결방안에 대해서 기술하면 가장 큰 문제점은 순수하게 자연어 처리를 통해 분위기를 태그하는 시스템에는 명사나 형용사, 동사의 출현빈도는 처리되지 않았기 때문에 사용자가 원하지 않는 노래가 추천될 확률이 올라간다는 점이다.

이 문제점을 해결하기 위해서 okt.pos() 함수를 응용하여 출현빈도를 출력하는 알고리즘을 설계에 추가한다.

okt.pos()에서 join 옵션을 추가한 상태로 가사를 처리한 후 for문을 활용하여 특정 문자가 나올 때마다 count를 하나 씩 늘리는 형태로 설계하여 빈도수가 높은 순서대로 사용자에게 추천하도록 한다. 
